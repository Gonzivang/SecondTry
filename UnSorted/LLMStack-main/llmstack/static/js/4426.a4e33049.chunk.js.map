{"version":3,"file":"static/js/4426.a4e33049.chunk.js","mappings":"2YAiBMA,GAAcC,EAAAA,EAAAA,GAAY,CAC9BC,WAAY,CACVC,WAAY,mBACZC,SAAU,GACVC,MAAO,QAETC,WAAY,CACVC,eAAgB,CACdC,eAAgB,CACdC,KAAM,CACJ,kBAAmB,CACjBJ,MAAO,WAKfK,aAAc,CACZF,eAAgB,CACdC,KAAM,CACJE,MAAO,kBACPC,OAAQ,qBAIdC,gBAAiB,CACfL,eAAgB,CACdC,KAAM,CACJK,WAAY,cAIlBC,iBAAkB,CAChBP,eAAgB,CACdQ,IAAK,CACHL,MAAO,OACPC,OAAQ,aAOX,SAASK,EAAOC,GAAQ,IAAD,EACxBC,GAAuB,QAAd,EAAAD,EAAME,gBAAQ,aAAd,EAAgBD,SAAU,GAEvC,OACE,SAAC,IAAI,UACFA,EAAOE,KAAI,SAACC,GAAK,OAChB,SAAC,KAAQ,WACP,SAAC,IAAK,CAACC,SAAS,QAAO,SAAED,KADZA,EAEJ,KAInB,CAEO,SAASE,EAAON,GACrB,IAAIO,GAAQ,UAASP,EAAMO,UAAY,CAAC,GAMxC,OAJY,OAARA,QAAQ,IAARA,GAAAA,EAAUC,qBACLD,EAASC,aAGXC,OAAOC,MAAU,OAALV,QAAK,IAALA,OAAK,EAALA,EAAOO,WAAY,CAAC,GAAGI,OAAS,GACjD,SAAC,IAAc,CACbC,UAAWA,EAAAA,EACXC,OAAQb,EAAMa,OACdC,SAAUd,EAAMc,SAChBP,SAAUA,EACVQ,UAAU,EACVC,MAAOlC,EACPmC,UAAU,iBAGZ,SAAC,IAAK,CAACC,aAAa,aAExB,CAEe,SAASC,EAAOnB,GAC7B,MAA0BoB,EAAAA,SAAe,QAAO,eAAzCC,EAAK,KAAEC,EAAQ,KAEtB,OACE,SAAC,IAAG,CAACC,GAAI,CAAE9B,MAAO,QAAS,UACzB,UAAC,KAAU,CAAC4B,MAAOA,EAAM,WACvB,SAAC,IAAG,CAACE,GAAI,CAAEC,aAAc,EAAGC,YAAa,WAAY,UACnD,SAAC,IAAO,CACNC,SAAU,SAACC,EAAOC,GAChBN,EAASM,EACX,EACA,aAAW,mBAAkB,UAE7B,SAAC,IAAG,CAACC,MAAM,SAASR,MAAM,cAG9B,SAAC,IAAQ,CAACA,MAAM,OAAOE,GAAI,CAAEO,QAAS,OAAQ,SAC3C9B,EAAM+B,SACL,SAAC,IAAgB,KAEjB,UAAC,IAAG,YACF,SAACzB,GAAM,UAAKN,KACZ,SAACD,GAAM,UAAKC,aAO1B,C,qPCnHA,SAASgC,EAAsBhC,GAE7B,OAAgCiC,EAAAA,EAAAA,UAAS,CAAC,GAAE,eAArC1B,EAAQ,KAAE2B,EAAW,KAC5B,GAAkDD,EAAAA,EAAAA,WAAS,GAAM,eAA1DE,EAAiB,KAAEC,EAAoB,KAC9C,IACE,IAAMC,EAAOC,KAAKC,MAAMvC,EAAMwC,SAAS,IACvC,OACE,SAACC,EAAA,EAAc,CACb5B,OAAQwB,EACR9B,SAAUA,EACVK,UAAWA,EAAAA,EACXc,SAAU,SAACgB,GACTR,EAAYQ,EAAEnC,SAChB,EACAoC,WACE,SAACC,EAAA,EAAM,CACLC,QAAQ,YACRC,QAAS,WACPV,GAAqB,GACrBpC,EAAM+C,aAAaxC,EACrB,EACAyC,SAAUb,EAAkB,SAC7B,YAQT,CAFE,MAAOO,GACPO,QAAQC,IAAIR,EACd,CACA,OAAO,yBAAK,yBACd,CAEe,SAASS,EAAiBnD,GACvC,OACE,SAAC,KAAa,kBACRA,GAAK,IACToD,cAAe,CAACC,EAAAA,GAChBjE,WAAY,CACVU,IAAK,YAAO,EAAJwD,KAAsB,IAAbtD,GAAK,YACZuD,EAAavD,EAAbuD,IAAKC,EAAQxD,EAARwD,IAEb,EAAyBD,EAAIE,MAAM,KAAI,eAAhCC,EAAO,KAAEC,EAAK,KACjBC,EAAY,CAAC,EACjB,IACEA,EAAYtB,KAAKC,MAAMoB,EAEvB,CADA,MAAOjB,GACP,CAGF,OAAIc,EAAIK,WAAW,gBAA8B,UAAZH,GAEjC,kBACEI,UAAQ,EACRH,OAAK,kBAAO,CAAEI,QAAS,UAAcH,GACrCJ,IAAKA,EACLQ,UAAQ,WAEP,MAMLR,EAAIS,SAAS,SACbT,EAAIS,SAAS,UACbT,EAAIS,SAAS,SAGX,kBACEH,UAAQ,EACRH,OAAK,kBACA,CACDI,QAAS,QACTG,SAAU,OACVC,UAAW,6BAEVP,GAELJ,IAAKA,EAAI,SACV,0BAOH,gBACEA,IAAKA,G,6qXACLD,IAAKG,EACLC,OAAK,kBACA,CACDI,QAAS,QACTG,SAAU,OACVC,UAAW,6BAEVP,IAIX,EACAQ,EAAG,YAAO,EAAJd,KAAsB,IAAbtD,GAAK,YAClB,OACE,gCAAOA,GAAK,IAAEqE,OAAO,SAASC,IAAI,sBAAqB,SACpDtE,EAAMwC,WAGb,EACA+B,MAAO,YAAO,EAAJjB,KAAsB,IAAbtD,GAAK,YACtB,OACE,kCACE2D,MAAO,CACLa,eAAgB,WAChBC,OAAQ,mBAENzE,GAAK,aAERA,EAAMwC,WAGb,EACAkC,GAAI,YAAO,EAAJpB,KAAsB,IAAbtD,GAAK,YACnB,OACE,iCACMA,GAAK,IACT2D,MAAO,CACLc,OAAQ,kBACR,SAEDzE,EAAMwC,WAGb,EACAmC,GAAI,YAAO,EAAJrB,KAAsB,IAAbtD,GAAK,YACnB,OACE,iCACMA,GAAK,IACT2D,MAAO,CACLc,OAAQ,kBACR,SAEDzE,EAAMwC,WAGb,EACAoC,GAAI,YAAO,EAAJtB,KAAsB,IAAbtD,GAAK,YACnB,OACE,iCACMA,GAAK,IACT2D,MAAO,CACLc,OAAQ,kBACR,SAEDzE,EAAMwC,WAGb,EACAqC,KAAM,YAAO,EAAJvB,KAA0B,IAAjBwB,GAAS,YAEzB,MAAiB,2BADAA,EAAU7D,WAGvB,SAACe,GAAqB,QACpBe,aAAc/C,EAAM+C,cAChB+B,KAIH,mCAAUA,GAAS,aAAGA,EAAUtC,WACzC,GACA,SAEDxC,EAAMwC,UAAY,KAGzB,C,8PCzKMuC,GAAehG,EAAAA,EAAAA,GAAY,CAC/BK,WAAY,CACV4F,aAAc,CACZC,aAAc,CACZC,aAAc,QAGlBC,aAAc,CACZF,aAAc,CACZpC,QAAS,YAEXvD,eAAgB,CACdC,KAAM,CACJ,2BAA4B,CAC1B,eAAgB,CAAEkF,OAAQ,yBAQtC,SAASW,EAAiBpF,GACxB,OAAO,SAAC,KAAgB,UAAKA,GAC/B,CAEA,SAASqF,EAA0BrF,GACjC,OAAO,SAACsF,EAAA,GAAmB,UAAKtF,GAClC,CAEO,SAASuF,EAAe,GAAc,IAAD,UAAXC,EAAG,EAAHA,IAAKC,EAAE,EAAFA,GACpC,GAA6BC,EAAAA,EAAAA,GACxB,OAAHF,QAAG,IAAHA,GAAS,QAAN,EAAHA,EAAKG,YAAI,WAAN,EAAH,EAAWC,cADL/E,EAAM,EAANA,OAAQC,EAAQ,EAARA,SAGhB,GAAwCmB,EAAAA,EAAAA,UAAS,MAAK,eAA/C4D,EAAY,KAAEC,EAAe,KACpC,GAA4B7D,EAAAA,EAAAA,UAAS,MAAK,eAAnC8D,EAAM,KAAEC,EAAS,KACxB,GAAkC/D,EAAAA,EAAAA,WAAS,GAAM,eAA1CgE,EAAS,KAAEC,EAAY,KAC9B,GAAwCjE,EAAAA,EAAAA,UAAS,CAAC,GAAE,eAA7CkE,EAAY,KAAEC,EAAe,KACpC,GAA4BnE,EAAAA,EAAAA,UAAS,MAAK,eAAnChC,EAAM,KAAEoG,EAAS,KAClBC,EAAiB,IAAIC,EAAAA,GACrBC,EAAiBF,EAAe/D,OACjC,OAAHiD,QAAG,IAAHA,GAAS,QAAN,EAAHA,EAAKG,YAAI,OAAiB,QAAjB,EAAT,EAAWc,uBAAe,WAAvB,EAAH,EAA4BC,WAAY,IAEpCC,GAAgBC,EAAAA,EAAAA,QAAO,CAAC,GACxBC,GAAgBD,EAAAA,EAAAA,SAAO,GA2BzBnB,GACFA,EAAGqB,cAAa,SAACC,GACf,IAAMC,EAAU1E,KAAKC,MAAMwE,EAAIpB,MAE3BqB,EAAQjB,SAEVY,EAAcM,SAAUC,EAAAA,EAAAA,GACtBP,EAAcM,QACdD,EAAQjB,SAKPc,EAAcI,UAAYD,EAAQG,UAAWH,EAAQ/G,SACxD4G,EAAcI,SAAU,GAGtBD,EAAQG,SACVrB,EAAgBkB,EAAQG,QAAQC,IAG9BJ,EAAQrF,OAA2B,SAAlBqF,EAAQrF,QAC3BkF,EAAcI,SAAU,EACxBf,GAAa,IAGXc,EAAQ/G,QAAU+G,EAAQ/G,OAAOU,OAAS,IAC5C0F,EAAU,CAAEpG,OAAQ+G,EAAQ/G,SAC5BiG,GAAa,IAGfI,EACGe,OAAOb,EAAgBG,EAAcM,SACrCK,MAAK,SAACC,GACLvB,EAAUuB,EACZ,GACJ,IAmBF,OACE,iBACE5D,MAAO,CACLO,SAAU,KACVsD,OAAQ,SACR/H,MAAO,OACPqC,QAAS,SACT2F,UAAW,QACX,WAEF,SAACC,EAAA,EAAe,CAACC,KAAc,QAAV,EAAEnC,EAAIG,YAAI,OAAQ,QAAR,EAAR,EAAUiC,cAAM,WAAR,EAAR,EAAkBC,kBACzC,SAACC,EAAA,EAAa,CAAC9G,MAAO+D,EAAa,UACjC,SAAC,KAAI,CACHlE,OAAQA,EACRC,UAAQ,kBACHA,GACA,CACD,yBAA0B,CAAEd,MAAO,CAAEgD,SAAUiD,MAGnDrF,UAAWA,EAAAA,EACXL,SAAU4F,EACV4B,SAAU,YAAmB,IAtCrBC,EAsCKzH,EAAQ,EAARA,SACN0F,GAIHR,EAAGwC,KACD3F,KAAK4F,UAAU,CACbvG,MAAO,OACPwG,WAAYtC,KAGhBK,GAAa,KATbE,EAAgB7F,GAxCZyH,EAyCGzH,EAxCjB2F,GAAa,GACbG,EAAU,MACVQ,EAAcI,SAAU,EACxBN,EAAcM,QAAU,CAAC,EAEzBxB,EAAGwC,KACD3F,KAAK4F,UAAU,CACbvG,MAAO,MACPqG,MAAAA,EACAG,WAAYtC,KAGhBK,GAAa,GAsCP,EACAkC,UAAW,CAAEC,gBAAiB,CAAEC,aApHnB,SAACtI,GAAW,IAAD,QACxBuI,GACoC,QAAxC,EAAAvI,EAAMc,SAAS,iCAAyB,aAAxC,EAA0C0H,aAAc,SACpD7E,GAAgD,QAAxC,EAAA3D,EAAMc,SAAS,iCAAyB,OAAO,QAAP,EAAxC,EAA0Cd,aAAK,WAAP,EAAxC,EAAiD2D,QAAS,CAAC,EAEzE,OAA4C,QAA5C,EAAI3D,EAAMc,SAAS,iCAAyB,OAAxC,EAA0C2H,SACrC,MAIP,SAAC7F,EAAA,EAAM,CACL8F,KAAK,SACL7F,QAAQ,YACR8F,KAAK,SACLpH,IAAE,gBACAqH,cAAe,QACZjF,GAAK,IACRkF,gBAAiB5C,EAAY,OAAS,YACtC,SAEDA,EAAY,SAAWsC,GAG9B,IA8FQO,QAAS,CACPC,WAAY3D,EACZ4D,MAAO3D,QAIb,iBAAK1B,MAAO,CAAEsF,UAAW,IAAK,UAC3BhD,IAAcY,EAAcI,UAAYhH,IACvC,SAACiJ,EAAA,GAAI,CACH3H,GAAI,CACFiG,OAAQ,OACRC,UAAW,UACX,UAEF,SAAC0B,EAAA,EAAgB,OAGrB,SAAChG,EAAA,EAAgB,CAAClC,UAAU,gBAAe,SAAE8E,IAC5C9F,IAAU,SAAC,KAAM,CAACC,SAAUD,SAIrC,C,+TCvLA,SAASmF,EAAiBpF,GACxB,OAAO,SAAC,KAAgB,UAAKA,GAC/B,CAEA,SAASqF,EAA0BrF,GACjC,OAAO,SAACsF,EAAA,GAAmB,UAAKtF,GAClC,CAEA,IAAMoJ,EAAwB,SAAH,GAA0B,IAApBpC,EAAO,EAAPA,QAASxB,EAAG,EAAHA,IACxC,IACE,MAAqB,QAAjBwB,EAAQqC,KACHrC,EAAQsC,QAEgC,IAAxC7I,OAAOC,KAAKsG,EAAQsC,SAAS3I,OAChCF,OAAOC,KAAKsG,EAAQsC,SACjBnJ,KAAI,SAACoJ,GAAG,OAAKvC,EAAQsC,QAAQC,EAAI,IACjCC,KAAK,QACR/I,OAAOC,KAAKsG,EAAQsC,SACjBnJ,KAAI,SAACoJ,GAAS,IAAD,IACNE,EAAgB,OAAHjE,QAAG,IAAHA,GAAS,QAAN,EAAHA,EAAKG,YAAI,OAAc,QAAd,EAAT,EAAWC,oBAAY,WAApB,EAAH,EAAyB8D,MAC1C,SAACC,GAAW,OAAKA,EAAYC,OAASL,CAAG,IAE3C,MAAM,KAAN,OAAYA,EAAG,gBACbE,GACqB,SAApBA,EAAWd,MACU,UAApBc,EAAWd,MACS,UAApBc,EAAWd,KAKT3B,EAAQsC,QAAQC,GAJhBvC,EAAQsC,QAAQC,GACb9F,MAAM,KAAK,GACXA,MAAM,KAAK,GACXA,MAAM,KAAK,GAGtB,IACC+F,KAAK,OAIhB,CAFE,MAAO9G,GACP,MAAO,EACT,CACF,EAEMmH,EAAkBzI,EAAAA,MACtB,YAAqD,IAAD,QAAjD4F,EAAO,EAAPA,QAAS8C,EAAK,EAALA,MAAOtE,EAAG,EAAHA,IAAKuE,EAAqB,EAArBA,sBACtB,OACE,iBAEEpG,MACmB,QAAjBqD,EAAQqC,KACJ,CACEtF,QAAS,OACT0D,UAAW,OACXvI,SAAU,GACV4C,QAAS,GAEX,CAAE2F,UAAW,SAClB,UAEiB,QAAjBT,EAAQqC,OAAqB,OAAH7D,QAAG,IAAHA,GAAS,QAAN,EAAHA,EAAKG,YAAI,OAAQ,QAAR,EAAT,EAAWiC,cAAM,WAAd,EAAH,EAAmBoC,mBAC5C,SAACC,EAAA,EAAM,CACLzG,IAAa,QAAV,EAAEgC,EAAIG,YAAI,OAAQ,QAAR,EAAR,EAAUiC,cAAM,WAAR,EAAR,EAAkBoC,gBACvBzG,IAAI,MACJI,MAAO,CAAE6D,OAAQ,uBAGH,QAAjBR,EAAQqC,MAAkBrC,EAAQsC,QAAQ3I,QAAU,IACnD,iBAAKM,UAAU,yCAAwC,WACrD,qBACA,qBACA,wBAGJ,SAACkC,EAAA,EAAgB,CACflC,UAAS,4BAAuB+F,EAAQqC,KAAI,YAC1CrC,EAAQ5G,MAAQ,QAAU,IAE5B2C,aAAcgH,EAAsB,SAEnCX,EAAsB,CAAEpC,QAAAA,EAASxB,IAAAA,QAhC/BsE,EAoCX,IAGK,SAASI,EAAc,GAAuC,IAAD,mEAApC1E,GAAG,EAAHA,IAAK2E,GAAQ,EAARA,SAAS,GAAD,EAAEC,MAAAA,QAAK,QAAQ,GAAE3E,GAAE,EAAFA,GAC5D,IAA6BC,EAAAA,EAAAA,GACxB,OAAHF,SAAG,IAAHA,IAAS,QAAN,EAAHA,GAAKG,YAAI,WAAN,EAAH,EAAWC,cADL/E,GAAM,GAANA,OAAQC,GAAQ,GAARA,SAGhB,IAAwCmB,EAAAA,EAAAA,UAAS,CAAC,GAAE,iBAA7CkE,GAAY,MAAEC,GAAe,MACpC,IAAwCnE,EAAAA,EAAAA,UAAS,MAAK,iBAA/C4D,GAAY,MAAEC,GAAe,MACpC,IAAgC7D,EAAAA,EAAAA,UAAS,IAAG,iBAArCoI,GAAQ,MAAEC,GAAW,MAC5B,IAA4BrI,EAAAA,EAAAA,UAAS,MAAK,iBAAnChC,GAAM,MAAEoG,GAAS,MACxB,IAAgCpE,EAAAA,EAAAA,WAAUmI,IAAM,iBAAzCG,GAAQ,MAAEC,GAAW,MAC5B,IAA8CvI,EAAAA,EAAAA,UAAS,CACrD4G,gBAAoB,OAAHrD,SAAG,IAAHA,IAAS,QAAN,EAAHA,GAAKG,YAAI,OAAQ,QAAR,EAAT,EAAWiC,cAAM,WAAd,EAAH,EAAmB6C,aACpCtL,MAAO,QACPuL,SAAU,QACVC,MAAO,GACPC,OAAQ,KACR,iBANKC,GAAe,MAAEC,GAAkB,MAOpCxE,GAAiB,IAAIC,EAAAA,GACrBC,GAAiBF,GAAe/D,OACjC,OAAHiD,SAAG,IAAHA,IAAS,QAAN,EAAHA,GAAKG,YAAI,OAAiB,QAAjB,EAAT,EAAWc,uBAAe,WAAvB,EAAH,EAA4BC,WAAY,IAEpCC,IAAgBC,EAAAA,EAAAA,QAAO,CAAC,GACxBmE,IAAkBnE,EAAAA,EAAAA,QAAO,IACzBoE,IAAgBpE,EAAAA,EAAAA,QAAO,MACvBC,IAAgBD,EAAAA,EAAAA,SAAO,GAEvB7B,IAAehG,EAAAA,EAAAA,GAAY,CAC/BK,WAAY,CACV4F,aAAc,CACZC,aAAc,CACZC,aAAc,QAGlBC,aAAc,CACZF,aAAc,CACZpC,QAAS,YAEXvD,eAAgB,CACdC,KAAM,CACJ,2BAA4B,CAC1B,eAAgB,CACdkF,OAAO,aAAD,QAAkB,OAAHe,SAAG,IAAHA,IAAS,QAAN,EAAHA,GAAKG,YAAI,WAAN,EAAH,EAAWiC,OAAO6C,eAAgB,SAEzD,2BAA4B,CAAEhG,OAAQ,qBACtC,qBAAsB,CAAEA,OAAQ,qBAChC,yBAA0B,CAAEA,OAAQ,sBAK5CwG,cAAe,CACb3L,eAAgB,CACd4L,QAAS,CACPhM,SAAU,SACViM,WAAY,EACZhM,MAAO,UAIbiM,cAAe,CACb9L,eAAgB,CACdC,KAAM,CACJ,wBAAyB,CACvBqJ,cAAe,eAQ3ByC,EAAAA,EAAAA,YAAU,WACR,GAAIjB,GAKF,GAJAkB,SAASC,KAAK5H,MAAQ,0BACtB2H,SAASE,uBAAuB,cAAc,GAAG7H,MAC/C,0BAEE4G,GAAU,CACZ,IAAMkB,EACJC,UAAUD,WAAaC,UAAUC,QAAUC,OAAOC,MAC9C1B,EACJ,iEAAiE2B,KAC/DL,GAEEhM,EAAQ0K,EAAW,OAAS,QAC5BzK,EAASyK,EAAW,OAAS,QACnCyB,OAAOG,OAAOC,YACZ,CAAEvM,MAAAA,EAAOC,OAAAA,EAAQiJ,KAAM,uBACvB,IAEJ,MACEsD,YAAW,WAAO,IAAD,IACfL,OAAOG,OAAOC,YACZ,CACErD,KAAM,wBACNlJ,OAAoB,OAAbuL,SAAa,IAAbA,IAAsB,QAAT,EAAbA,GAAe/D,eAAO,WAAT,EAAb,EAAwBiF,cAAe,OAC9CxM,QAAqB,OAAbsL,SAAa,IAAbA,IAAsB,QAAT,EAAbA,GAAe/D,eAAO,WAAT,EAAb,EAAwBkF,eAAgB,QAElD,IAEJ,GAAG,KACHP,OAAOG,OAAOC,YAAY,CAAErD,KAAM,wBAA0B,IAGlE,GAAG,CAACyB,GAAOG,MAEXc,EAAAA,EAAAA,YAAU,WAAO,IAAD,YACmD,IAA1D,OAAH7F,SAAG,IAAHA,IAAS,QAAN,EAAHA,GAAKG,YAAI,OAAQ,QAAR,EAAT,EAAWiC,cAAM,OAAjB,EAAmBwE,iBAAuC,IAApB/B,GAAS1J,QACjD2J,GAAY,CACV,CACEjB,KAAM,MACNC,QAAiB,QAAV,EAAE9D,GAAIG,YAAI,OAAQ,QAAR,EAAR,EAAUiC,cAAM,WAAR,EAAR,EAAkBwE,mBAKjC,GACK,OAAH5G,SAAG,IAAHA,IAAS,QAAN,EAAHA,GAAKG,YAAI,OAAQ,QAAR,EAAT,EAAWiC,cAAM,OAAjB,EAAmByE,kBAChB,OAAH7G,SAAG,IAAHA,IAAS,QAAN,EAAHA,GAAKG,YAAI,OAAQ,QAAR,EAAT,EAAWiC,cAAM,OAAjB,EAAmB0E,mBACC,IAApBjC,GAAS1J,OAET,IAAK,IAAD,IACIgD,EAAQrB,KAAKC,MAAS,OAAHiD,SAAG,IAAHA,IAAS,QAAN,EAAHA,GAAKG,YAAI,OAAQ,QAAR,EAAT,EAAWiC,cAAM,WAAd,EAAH,EAAmB0E,mBAC5CxB,IAAmB,SAACyB,GAAe,yBAC9BA,GACA5I,EAAK,GAIZ,CAFE,MAAOjB,GACPO,QAAQ7C,MAAMsC,EAChB,CAEJ,GAAG,CAAC8C,GAAK6E,GAAS1J,SAEd8E,IACFA,GAAGqB,cAAa,SAACC,GACf,IAAI3G,EAAQ,KACN4G,EAAU1E,KAAKC,MAAMwE,EAAIpB,MAS/B,GAPIqB,EAAQjB,SACVY,GAAcM,SAAUC,EAAAA,EAAAA,GACtBP,GAAcM,QACdD,EAAQjB,SAIRiB,EAAQrF,OAA2B,SAAlBqF,EAAQrF,MAC3BkF,GAAcI,SAAU,MAD1B,CAUsB,IAAD,EAArB,GAJKJ,GAAcI,UAAYD,EAAQG,UAAWH,EAAQ/G,SACxD4G,GAAcI,SAAU,GAGtBD,EAAQG,QACVrB,GAA+B,QAAhB,EAACkB,EAAQG,eAAO,aAAf,EAAiBC,IAG/BJ,EAAQ/G,QAAU+G,EAAQ/G,OAAOU,OAAS,IAC5CP,EAAQ4G,EAAQ/G,OAAOuJ,KAAK,SAG9BlD,GACGe,OAAOb,GAAgBG,GAAcM,SACrCK,MAAK,SAACC,GACmB,KAApBA,EAASiF,QAA2B,OAAVpM,IAC5BA,EAAQ,0CAGV2K,GAAgB9D,QAAO,kBAClB8D,GAAgB9D,QAAQwF,MAAM,GAAI,IAAE,CACvC,CACEpD,KAAM,MACNC,QACY,OAAVlJ,EACIA,GAAS,2CACTmH,EAASiF,OACfpM,MAAiB,OAAVA,KAGXkK,GAAYS,GAAgB9D,SAC5B7G,EAAQ,IACV,GAnCF,CAoCF,IAGF,IAAMsM,GAAS,SAAC1E,GACd3B,GAAU,MACViE,GAAY,GAAD,eAAKD,IAAQ,CAAE,CAAEhB,KAAM,OAAQC,QAAStB,MAEnDnB,GAAcI,SAAU,EACxBN,GAAcM,QAAU,CAAC,EACzB8D,GAAgB9D,QAAO,kBAClBoD,IAAQ,CACX,CAAEhB,KAAM,OAAQC,QAAStB,GACzB,CAAEqB,KAAM,MAAOC,QAAS,MAE1B7D,GAAGwC,KACD3F,KAAK4F,UAAU,CACbvG,MAAO,MACPqG,MAAAA,EACAG,WAAYtC,KAGlB,EAOA,OALAwF,EAAAA,EAAAA,YAAU,WACR,IAAMsB,EAAcrB,SAASsB,eAAe,YAC5CD,EAAYE,UAAYF,EAAYG,YACtC,GAAG,CAACzC,MAGF,gCACGD,KACC,SAAC2C,EAAA,EAAG,CACFpJ,MAAOkH,GACP/H,QAAS,kBAAM0H,IAAaD,GAAS,EACrC1H,QACK,OAAH2C,SAAG,IAAHA,IAAS,QAAN,EAAHA,GAAKG,YAAI,OAAQ,QAAR,EAAT,EAAWiC,cAAM,OAAjB,EAAmByE,iBAAmB,WAAa,WAErDW,IAAKhC,GAAc,SAElBT,IACC,SAAC0C,EAAA,EAAqB,IACjB,OAAHzH,SAAG,IAAHA,IAAS,QAAN,EAAHA,GAAKG,YAAI,OAAQ,QAAR,EAAT,EAAWiC,cAAM,OAAjB,EAAmByE,kBACrB,0BAAU,OAAH7G,SAAG,IAAHA,IAAS,QAAN,EAAHA,GAAKG,YAAI,OAAQ,QAAR,EAAT,EAAWiC,cAAM,WAAd,EAAH,EAAmByE,oBAE1B,SAACa,EAAA,EAAkB,OAIzB,iBACEjM,UAAS,yBAAoBmJ,GAAQ,WAAa,GAAE,YAClDG,GAAW,YAAc,aAE3B5G,MAAO,CACLlE,MAAO0K,GAAW,MAAQ,QAC1B,UAEDC,KACC,iBACEzG,MAAO,CACLI,QAAS,OACT8E,gBAAoB,OAAHrD,SAAG,IAAHA,IAAS,QAAN,EAAHA,GAAKG,YAAI,WAAN,EAAH,EAAWiC,OAAO6C,aACnC0C,aAAc,mBACd,WAEE,OAAH3H,SAAG,IAAHA,IAAS,QAAN,EAAHA,GAAKG,YAAI,OAAQ,QAAR,EAAT,EAAWiC,cAAM,WAAd,EAAH,EAAmBoC,mBAClB,SAACC,EAAA,EAAM,CACLzG,IAAa,QAAV,EAAEgC,GAAIG,YAAI,OAAQ,QAAR,EAAR,EAAUiC,cAAM,WAAR,EAAR,EAAkBoC,gBACvBzG,IAAI,MACJI,MAAO,CAAE6D,OAAQ,WAAY/C,OAAQ,qBAGzC,iBACEd,MAAO,CACL6D,OAAQ,WACR4F,WAAY,IACZlO,SAAU,OACVC,MAAO,QACP2C,QAAY,OAAH0D,SAAG,IAAHA,IAAS,QAAN,EAAHA,GAAKG,YAAI,OAAQ,QAAR,EAAT,EAAWiC,cAAM,OAAjB,EAAmBoC,gBACxB,UACA,QACJ,SAEE,OAAHxE,SAAG,IAAHA,QAAG,EAAHA,GAAKoE,WAIZ,UAACyD,EAAA,EAAK,CAAC9L,GAAI,CAAEO,QAAS,OAAQwL,SAAU,QAAS,WAC/C,SAAC5F,EAAA,EAAe,CACdC,KAAc,QAAV,EAAEnC,GAAIG,YAAI,OAAQ,QAAR,EAAR,EAAUiC,cAAM,OAAgB,QAAhB,EAAhB,EAAkBC,sBAAc,WAAxB,EAAR,EAAkC0F,WACtC,UACA,8BAGJ,iBACE5J,MAAO,CACLsF,UAAW,GACXvJ,OAAQyK,IAAYC,GAAQ,OAAS,QACrCkD,SAAU,OACVvJ,QAAS,OACTyJ,cAAe,SACfC,IAAK,IAEPrG,GAAG,WAAU,UAEZiD,GAASlK,KAAI,SAAC6G,EAAS8C,GACtB,OACE,SAACD,EAAe,CAEd7C,QAASA,EACT8C,MAAOA,EACPtE,IAAKA,GACLuE,sBAAuB,SAACpE,GAAU,GAJ7BmE,EAOX,KACEjD,GAAcI,UACd,iBACEtD,MAAO,CACLI,QAAS,OACT0D,UAAW,OACXvI,SAAU,GACV4C,QAAS,GACT,WAEE,OAAH0D,SAAG,IAAHA,IAAS,QAAN,EAAHA,GAAKG,YAAI,OAAQ,QAAR,EAAT,EAAWiC,cAAM,WAAd,EAAH,EAAmBoC,mBAClB,SAACC,EAAA,EAAM,CACLzG,IAAa,QAAV,EAAEgC,GAAIG,YAAI,OAAQ,QAAR,EAAR,EAAUiC,cAAM,WAAR,EAAR,EAAkBoC,gBACvBzG,IAAI,MACJI,MAAO,CAAE6D,OAAQ,wBAGrB,iBAAKvG,UAAU,yCAAwC,WACrD,qBACA,qBACA,0BAILhB,KAAU,SAAC,KAAM,CAACC,SAAUD,KAE3B,IADDoK,GAASqD,QAAO,SAAC1G,GAAO,MAAsB,SAAjBA,EAAQqC,IAAe,IAAE1I,SAElD,OAAH6E,SAAG,IAAHA,IAAS,QAAN,EAAHA,GAAKG,YAAI,OAAQ,QAAR,EAAT,EAAWiC,cAAM,WAAd,EAAH,EAAmB+F,sBAChB,OAAHnI,SAAG,IAAHA,IAAS,QAAN,EAAHA,GAAKG,YAAI,OAAQ,QAAR,GAAT,EAAWiC,cAAM,YAAd,EAAH,GAAmB+F,mBAAmBhN,QAAS,IAC7C,SAACuI,EAAA,GAAI,CACH3H,GAAI,CACFqM,UAAW,WACXnG,UAAW,QACXwB,UAAW,QACX,SAEE,OAAHzD,SAAG,IAAHA,IAAS,QAAN,GAAHA,GAAKG,YAAI,QAAQ,QAAR,GAAT,GAAWiC,cAAM,YAAd,EAAH,GAAmB+F,mBAAmBxN,KACrC,SAAC6G,EAAS8C,GAAK,OACb,SAAC+D,EAAA,EAAI,CAEHhM,MAAOmF,EACPzF,GAAI,CAAEiG,OAAQ,WACd1E,QAAS,wBACJ,OAAH0C,SAAG,IAAHA,IAAiB,QAAd,EAAHA,GAAKI,oBAAY,WAAd,EAAH,EAAmBjF,QAAS,GAC5B+L,IAAO,UACJjM,OAAOC,KAAQ,OAAH8E,SAAG,IAAHA,QAAG,EAAHA,GAAKI,cAAc,GAAGgE,KAAO5C,GAC1C,GAPC8C,EASL,UAMd,SAAChC,EAAA,EAAa,CAAC9G,MAAO+D,GAAa,UACjC,SAAC,KAAI,CACHxE,SAAU4F,GACVtF,OAAQA,GACRC,UAAQ,kBACHA,IAAQ,IACX,yBAA0B,CACxB2H,SACEhI,OAAOC,KAAW,OAANG,SAAM,IAANA,QAAM,EAANA,GAAQiN,YAAYnN,QAAU,GAGC,IAF3CF,OAAOC,KAAKI,IACTX,KAAI,SAACoJ,GAAG,aAAkB,QAAlB,EAAKzI,GAASyI,UAAI,aAAb,EAAgB,YAAY,IACzCmE,QAAO,SAACK,GAAC,MAAW,UAANA,CAAa,IAAEpN,UAKtCC,UAAWA,EAAAA,EACXmH,SAAU,YAAmB,IAAhBxH,EAAQ,EAARA,SACPE,OAAOC,KAAW,OAANG,SAAM,IAANA,QAAM,EAANA,GAAQiN,YAAYnN,OAAS,GAC3CyF,GAAgB7F,GAElBmM,GAAOnM,EACT,EACAuI,QAAS,CACPC,WAAY3D,EACZ4D,MAAO3D,OAIZ+E,KACC,eAAGzG,MAAO,CAAE8D,UAAW,UAAW,UAAC,aACtB,KACX,cACEuG,KAAK,0BACL3J,OAAO,SACPC,IAAI,aAAY,SACjB,wBASf,C,2FC9eO,SAASoD,EAAgB,GAAW,IAATC,EAAI,EAAJA,KAE1BsG,GADY,IAAIC,WACAC,gBAAgBxG,EAAM,aAE5C,OAAOyG,OAAOzG,GAAM9D,WAAW,MAC7B,gBACE5C,UAAU,2BACVoN,wBAAyB,CAAEC,OAAQL,EAAI1C,KAAKgD,cAG9C,SAAC,IAAa,UAAE5G,GAEpB,C,wICbO,SAAS6G,EAAM,GAAyC,IAAvCC,EAAU,EAAVA,WAAYvN,EAAY,EAAZA,cAAsB,YACxD,OACE,UAAC,IAAG,CACF6C,QAAQ,OACRyJ,cAAc,SACdkB,WAAW,SACXC,eAAe,SACfjP,OAAO,OACPP,MAAM,UAAS,UAEdsP,GAA0B,MAC3B,SAAC,IAAU,CAAC5L,QAAQ,KAAI,SACrB3B,GAA8B,wBAIvC,C,gKCkIA,IA7I4B,SAAClB,GAC3B,OAAsCiC,EAAAA,EAAAA,WAAS,GAAM,eAA9C2M,EAAW,KAAEC,EAAc,KAClC,GAA0C5M,EAAAA,EAAAA,UAAS,MAAK,eAAjD6M,EAAa,KAAEC,EAAgB,KACtC,GAAwC9M,EAAAA,EAAAA,UAAS,MAAK,eAA/C+M,EAAY,KAAEC,EAAe,KAE9BC,EAAoB,yCAAG,2FAG1B,OAFGF,GACFC,EAAgB,MACjB,kBAEsBvD,UAAUyD,aAAaC,aAAa,CAAEC,OAAO,IAAQ,KAAD,EAAnEC,EAAM,QACNC,EAAW,IAAIC,cAAcF,EAAQ,CACzCG,SAAU,gBAGHC,iBAAiB,iBAAiB,SAAC/N,GAC1C,IAAMgO,EAAYhO,EAAMgE,KACxBsJ,EAAgBU,GAChB,IAAMC,EAAS,IAAIhE,OAAOiE,WAE1BD,EAAOE,OAAS,SAACnO,GAAW,IAAD,EACzB,GAAoC,kBAAb,QAAnB,EAAOA,EAAM0C,cAAM,aAAZ,EAAc0L,QAAqB,CAC5C,IAAMC,EAAarO,EAAM0C,OAAO0L,OAAOtM,MAAM,KACvCwM,EAAO,UAAMD,EAAW,GAAE,iBAJvB,uBAIoC,YAAIA,EAAW,IAC5DhQ,EAAM0B,SAASuO,EACjB,MACEjQ,EAAM0B,SAAS,KAEnB,EACAkO,EAAOM,cAAcP,EACvB,IAEAJ,EAASY,QACTtB,GAAe,GACfE,EAAiBQ,GAAU,kDAE3BtM,QAAQ7C,MAAM,4BAA4B,EAAD,IAAS,0DAErD,kBAjCyB,mCAmCpBgQ,EAAsB,WACtBtB,IACFA,EAAcuB,OACdxB,GAAe,GAEnB,EAEMyB,EAAuB,WAC3BrB,EAAgB,MAChBjP,EAAM0B,SAAS,KACjB,EAEM6O,EAAa,SAACvQ,GAClB,OACE,UAAC,IAAK,CAACwQ,UAAW,SAAS,WACzB,SAAC,IAAU,CACT1N,QAASoM,EACT/P,MAAM,UACNuJ,KAAK,QACL7F,QAAQ,WAAU,UAElB,SAAC,IAAO,OAEV,SAAC,IAAU,CAACc,MAAO,CAAEzE,SAAU,MAAOuI,UAAW,UAAW,SAAC,WAG7D,SAAC,IAAU,CAAC9D,MAAO,CAAEzE,SAAU,MAAOuI,UAAW,UAAW,SAAC,gBAKnE,EAEMgJ,EAAW,SAACzQ,GAChB,OACE,UAAC,IAAK,CAACwQ,UAAW,SAAS,WACzB,SAAC,IAAU,CACT1N,QAASsN,EACT1H,KAAK,QACL,aAAW,iBACX7F,QAAQ,WAAU,UAElB,SAAC,IAAc,OAEjB,SAAC,IAAU,CACTc,MAAO,CAAEzE,SAAU,MAAOuI,UAAW,SAAUtI,MAAO,OAAQ,SAC/D,gBAKP,EAEMuR,EAAqB,SAAC1Q,GAC1B,OACE,UAAC,IAAK,CAACwQ,UAAW,SAAUG,GAAI,EAAGC,GAAI,EAAE,WACvC,SAAC,IAAU,CACT9N,QAASwN,EACT5H,KAAK,QACL,aAAW,kBACX7F,QAAQ,WAAU,UAElB,SAAC,IAAU,OAEb,SAAC,IAAU,CAACc,MAAO,CAAEzE,SAAU,MAAOuI,UAAW,UAAW,SAAC,WAG7D,SAAC,IAAU,CAAC9D,MAAO,CAAEzE,SAAU,MAAOuI,UAAW,UAAW,SAAC,gBAKnE,EAEA,OACE,4BACE,2BAAQzH,EAAM6B,SACd,yBACGmN,GACC,UAAC,IAAK,CAACwB,UAAW,MAAM,WACtB,kBAAOhN,IAAKqN,IAAIC,gBAAgB9B,GAAelL,UAAQ,KACvD,UAAC,IAAG,CACFvC,GAAI,CACFwC,QAAS,OACT4K,eAAgB,iBAChB,WAEF,SAAC+B,EAAkB,KACnB,SAACH,EAAU,UAGb3B,GACF,SAAC6B,EAAQ,KAET,SAACF,EAAU,QAKrB,C,wGCjJO,SAASrJ,EAAc6J,EAAMC,GAClC,IAAKD,EAAM,OAAOC,EAClB,IAAKA,EAAM,OAAOD,EAIlB,IAFA,IAAIE,GAAM,UAAQF,GAElB,MAA2BtQ,OAAOyQ,QAAQF,GAAK,eAAE,CAA5C,sBAAOzH,EAAG,KAAElI,EAAK,KAEpB,GAAK4P,EAAO1H,GAMZ,GAAI4H,MAAMC,QAAQ/P,GAChB,GAAI8P,MAAMC,QAAQH,EAAO1H,IAEvB,IAAK,IAAI8H,EAAI,EAAGA,EAAIhQ,EAAMV,OAAQ0Q,IAChC,GAAIA,EAAIJ,EAAO1H,GAAK5I,OAAQ,CAC1B,GAAwB,kBAAbU,EAAMgQ,GAAiB,CAChCJ,EAAO1H,GAAK8H,GAAKJ,EAAO1H,GAAK8H,GAAKhQ,EAAMgQ,GACxC,QACF,CACA,GAAwB,kBAAbhQ,EAAMgQ,GAAiB,CAChCJ,EAAO1H,GAAK8H,GAAKhQ,EAAMgQ,GACvB,QACF,CAEAJ,EAAO1H,GAAK8H,GAAKnK,EAAc+J,EAAO1H,GAAK8H,GAAIhQ,EAAMgQ,GACvD,MAEEJ,EAAO1H,GAAK+H,KAAKjQ,EAAMgQ,SAI3BJ,EAAO1H,GAAO0H,EAAO1H,GAAOlI,OAG9B4P,EAAO1H,GADmB,kBAAVlI,EACF6F,EAAc+J,EAAO1H,GAAMlI,GAE3B4P,EAAO1H,GAAOlI,OA/B5B4P,EAAO1H,GAAOlI,CAiClB,CACA,OAAO4P,CACT,CAOO,SAASvL,EAA6B6L,GAC3C,IAAI1Q,EAAS,CACX8H,KAAM,SACNmF,WAAY,CAAC,GAGXhN,EAAW,CAAC,EACZ0Q,EAAQ,GACRC,EAAW,GAwEf,OAtEAF,GACEA,EAAYG,SAAQ,SAACC,GAqDW,IAAD,KApD7BH,EAAMF,KAAKK,EAAM/H,MAEb+H,EAAMF,UACRA,EAASH,KAAKK,EAAM/H,MAGtB/I,EAAOiN,WAAW6D,EAAM/H,MAAQ,CAC9BjB,KACiB,SAAfgJ,EAAMhJ,MACS,UAAfgJ,EAAMhJ,MACS,SAAfgJ,EAAMhJ,MACS,WAAfgJ,EAAMhJ,KACF,SACAgJ,EAAMhJ,KACZiJ,MAAOD,EAAMC,MACbC,YAAaF,EAAME,aAGjBF,EAAMG,UACRjR,EAAOiN,WAAW6D,EAAM/H,MAAMkI,QAAUH,EAAMG,SAG7B,SAAfH,EAAMhJ,OACR7H,EAAS6Q,EAAM/H,MAAQ,CACrB,YAAa,aAIE,YAAf+H,EAAMhJ,OACR7H,EAAS6Q,EAAM/H,MAAQ,CACrB,YAAa,UAIE,SAAf+H,EAAMhJ,OACR7H,EAAS6Q,EAAM/H,MAAQ,CACrB,YAAa,QAEf/I,EAAOiN,WAAW6D,EAAM/H,MAAMmI,OAAS,WACvClR,EAAOiN,WAAW6D,EAAM/H,MAAMoI,QAC5B,mCAGe,UAAfL,EAAMhJ,OACR7H,EAAS6Q,EAAM/H,MAAQ,CACrB,YAAa,SAEf/I,EAAOiN,WAAW6D,EAAM/H,MAAMmI,OAAS,WACvClR,EAAOiN,WAAW6D,EAAM/H,MAAMoI,QAC5B,mCAGe,WAAfL,EAAMhJ,QACR7H,EAAS6Q,EAAM/H,MAAQ,CACrB,YAAa,UAEf/I,EAAOiN,WAAW6D,EAAM/H,MAAMqI,KAAoB,QAAhB,EAAGN,EAAMO,eAAO,aAAb,EAAe/R,KAClD,SAACgS,GAAM,OAAKA,EAAO9Q,KAAK,IAE1BR,EAAOiN,WAAW6D,EAAM/H,MAAMwI,UAAyB,QAAhB,EAAGT,EAAMO,eAAO,aAAb,EAAe/R,KACvD,SAACgS,GAAM,OAAKA,EAAOtQ,KAAK,IAG9B,IAEFf,EAAS,YAAc0Q,EACvB1Q,EAAS,eAAiB2Q,EAEnB,CAAE5Q,OAAAA,EAAQC,SAAAA,EACnB,C,mFCnIauR,EAAE,WACb,WAAYC,IAAM,eAChBC,KAAKD,IAAMA,EACXC,KAAK9M,GAAK,KACV8M,KAAKC,UAAY,KACjBD,KAAKE,MAAQ,EACf,CAyCC,OAzCA,8BAED,WACE,OAAOF,KAAK9M,GAAGiN,UACjB,GAAC,qBAED,WAAW,IAAD,OACRH,KAAK9M,GAAK,IAAIkN,UAAUJ,KAAKD,KAC7BC,KAAK9M,GAAGmN,UAAYL,KAAKC,UACzBD,KAAK9M,GAAGoN,OAAS,WAEf,EAAKJ,MAAMf,SAAQ,SAACoB,GAClB,EAAKrN,GAAGwC,KAAK6K,EACf,IACA,EAAKL,MAAQ,EACf,EACAF,KAAK9M,GAAGsN,QAAU,WAChB9P,QAAQC,IAAI,mBACd,CACF,GAEA,kBACA,SAAK4P,GACa,OAAZP,KAAK9M,IAAa8M,KAAKS,UAEvBT,KAAK9M,GAAGiN,aAAeC,UAAUM,WACnCV,KAAKE,MAAMnB,KAAKwB,GACPP,KAAK9M,GAAGiN,aAAeC,UAAUO,KAC1CX,KAAK9M,GAAGwC,KAAK6K,IAEbP,KAAKE,MAAMnB,KAAKwB,GAChBP,KAAKS,UAET,GAAC,mBAED,WACET,KAAK9M,GAAG0N,OACV,GAAC,0BAED,SAAaX,GACXD,KAAKC,UAAYA,CACnB,KAAC,EA/CY,E","sources":["components/Output.jsx","components/apps/MarkdownRenderer.jsx","components/apps/WebAppRenderer.jsx","components/apps/WebChatRender.jsx","components/apps/lexical/LexicalRenderer.jsx","components/form/Empty.jsx","components/form/VoiceRecorderWidget.jsx","data/utils.js","data/ws.js"],"sourcesContent":["import * as React from \"react\";\n// eslint-disable-next-line\nimport AceEditor from \"react-ace\";\n\nimport { List, ListItem } from \"@mui/material\";\n\nimport { Box, Tab, CircularProgress, Alert } from \"@mui/material\";\nimport { TabContext, TabList, TabPanel } from \"@mui/lab\";\n\nimport \"ace-builds/src-noconflict/mode-python\";\nimport \"ace-builds/src-noconflict/theme-github\";\nimport { createTheme } from \"@mui/material/styles\";\n\nimport validator from \"@rjsf/validator-ajv8\";\nimport ThemedJsonForm from \"./ThemedJsonForm\";\nimport { Empty } from \"./form/Empty\";\n\nconst outputTheme = createTheme({\n  typography: {\n    fontFamily: \"Lato, sans-serif\",\n    fontSize: 14,\n    color: \"#000\",\n  },\n  components: {\n    MuiFormControl: {\n      styleOverrides: {\n        root: {\n          \"& .Mui-disabled\": {\n            color: \"#000\",\n          },\n        },\n      },\n    },\n    MuiImageList: {\n      styleOverrides: {\n        root: {\n          width: \"100% !important\",\n          height: \"100% !important\",\n        },\n      },\n    },\n    MuiListItemText: {\n      styleOverrides: {\n        root: {\n          whiteSpace: \"pre-wrap\",\n        },\n      },\n    },\n    MuiImageListItem: {\n      styleOverrides: {\n        img: {\n          width: \"auto\",\n          height: \"auto\",\n        },\n      },\n    },\n  },\n});\n\nexport function Errors(props) {\n  let errors = props.runError?.errors || [];\n\n  return (\n    <List>\n      {errors.map((error) => (\n        <ListItem key={error}>\n          <Alert severity=\"error\">{error}</Alert>\n        </ListItem>\n      ))}\n    </List>\n  );\n}\n\nexport function Result(props) {\n  let formData = { ...(props.formData || {}) };\n\n  if (formData?.api_response) {\n    delete formData.api_response;\n  }\n\n  return Object.keys(props?.formData || {}).length > 0 ? (\n    <ThemedJsonForm\n      validator={validator}\n      schema={props.schema}\n      uiSchema={props.uiSchema}\n      formData={formData}\n      readonly={true}\n      theme={outputTheme}\n      className=\"output-form\"\n    ></ThemedJsonForm>\n  ) : (\n    <Empty emptyMessage=\"No output\" />\n  );\n}\n\nexport default function Output(props) {\n  const [value, setValue] = React.useState(\"form\");\n\n  return (\n    <Box sx={{ width: \"100%\" }}>\n      <TabContext value={value}>\n        <Box sx={{ borderBottom: 1, borderColor: \"divider\" }}>\n          <TabList\n            onChange={(event, newValue) => {\n              setValue(newValue);\n            }}\n            aria-label=\"Output form tabs\"\n          >\n            <Tab label=\"Output\" value=\"form\" />\n          </TabList>\n        </Box>\n        <TabPanel value=\"form\" sx={{ padding: \"4px\" }}>\n          {props.loading ? (\n            <CircularProgress />\n          ) : (\n            <Box>\n              <Result {...props} />\n              <Errors {...props} />\n            </Box>\n          )}\n        </TabPanel>\n      </TabContext>\n    </Box>\n  );\n}\n","import ReactMarkdown from \"react-markdown\";\nimport remarkGfm from \"remark-gfm\";\nimport loadingImage from \"../../assets/images/loading.gif\";\nimport ThemedJsonForm from \"../ThemedJsonForm\";\nimport validator from \"@rjsf/validator-ajv8\";\nimport { useState } from \"react\";\n\nimport { Button } from \"@mui/material\";\n\nfunction FunctionFormComponent(props) {\n  // Render a form component with submit button\n  const [formData, setFormData] = useState({});\n  const [submitBtnDisabled, setSubmitBtnDisabled] = useState(false);\n  try {\n    const form = JSON.parse(props.children[0]);\n    return (\n      <ThemedJsonForm\n        schema={form}\n        formData={formData}\n        validator={validator}\n        onChange={(e) => {\n          setFormData(e.formData);\n        }}\n        submitBtn={\n          <Button\n            variant=\"contained\"\n            onClick={() => {\n              setSubmitBtnDisabled(true);\n              props.onFormSubmit(formData);\n            }}\n            disabled={submitBtnDisabled}\n          >\n            Submit\n          </Button>\n        }\n      />\n    );\n  } catch (e) {\n    console.log(e);\n  }\n  return <div>Unable to render form</div>;\n}\n\nexport default function MarkdownRenderer(props) {\n  return (\n    <ReactMarkdown\n      {...props}\n      remarkPlugins={[remarkGfm]}\n      components={{\n        img: ({ node, ...props }) => {\n          const { alt, src } = props;\n          // We provide alt text and style as altText|style where style is a string\n          const [altText, style] = alt.split(\"|\");\n          let styleJson = {};\n          try {\n            styleJson = JSON.parse(style);\n          } catch (e) {\n            // Do nothing\n          }\n\n          if (src.startsWith(\"data:audio/\") || altText === \"Audio\") {\n            return (\n              <audio\n                controls\n                style={{ ...{ display: \"block\" }, ...styleJson }}\n                src={src}\n                autoPlay\n              >\n                {\" \"}\n              </audio>\n            );\n          }\n          // If src is a video that can be played on the browser, render it as a video\n          if (\n            src.endsWith(\".mp4\") ||\n            src.endsWith(\".webm\") ||\n            src.endsWith(\".ogg\")\n          ) {\n            return (\n              <video\n                controls\n                style={{\n                  ...{\n                    display: \"block\",\n                    maxWidth: \"100%\",\n                    boxShadow: \"0px 0px 10px 1px #7d7d7d\",\n                  },\n                  ...styleJson,\n                }}\n                src={src}\n              >\n                Unable to load video\n              </video>\n            );\n          }\n\n          return (\n            <img\n              src={src || loadingImage}\n              alt={altText}\n              style={{\n                ...{\n                  display: \"block\",\n                  maxWidth: \"100%\",\n                  boxShadow: \"0px 0px 10px 1px #7d7d7d\",\n                },\n                ...styleJson,\n              }}\n            />\n          );\n        },\n        a: ({ node, ...props }) => {\n          return (\n            <a {...props} target=\"_blank\" rel=\"noreferrer nofollow\">\n              {props.children}\n            </a>\n          );\n        },\n        table: ({ node, ...props }) => {\n          return (\n            <table\n              style={{\n                borderCollapse: \"collapse\",\n                border: \"1px solid #ccc\",\n              }}\n              {...props}\n            >\n              {props.children}\n            </table>\n          );\n        },\n        tr: ({ node, ...props }) => {\n          return (\n            <tr\n              {...props}\n              style={{\n                border: \"1px solid #ccc\",\n              }}\n            >\n              {props.children}\n            </tr>\n          );\n        },\n        th: ({ node, ...props }) => {\n          return (\n            <th\n              {...props}\n              style={{\n                border: \"1px solid #ccc\",\n              }}\n            >\n              {props.children}\n            </th>\n          );\n        },\n        td: ({ node, ...props }) => {\n          return (\n            <td\n              {...props}\n              style={{\n                border: \"1px solid #ccc\",\n              }}\n            >\n              {props.children}\n            </td>\n          );\n        },\n        code: ({ node, ...codeProps }) => {\n          const language = codeProps.className;\n          if (language === \"language-function_form\") {\n            return (\n              <FunctionFormComponent\n                onFormSubmit={props.onFormSubmit}\n                {...codeProps}\n              />\n            );\n          }\n          return <code {...codeProps}>{codeProps.children}</code>;\n        },\n      }}\n    >\n      {props.children || \"\"}\n    </ReactMarkdown>\n  );\n}\n","import React, { useState, useRef } from \"react\";\nimport { Button } from \"@mui/material\";\nimport { ThemeProvider, createTheme } from \"@mui/material/styles\";\nimport { CircularProgress, Grid } from \"@mui/material\";\nimport { getJSONSchemaFromInputFields, stitchObjects } from \"../../data/utils\";\nimport FileUploadWidget from \"../form/DropzoneFileWidget\";\nimport { Errors } from \"../Output\";\nimport MarkdownRenderer from \"./MarkdownRenderer\";\nimport { LexicalRenderer } from \"./lexical/LexicalRenderer\";\nimport Form from \"@rjsf/mui\";\nimport validator from \"@rjsf/validator-ajv8\";\nimport { Liquid } from \"liquidjs\";\nimport \"./WebAppRenderer.css\";\nimport VoiceRecorderWidget from \"../form/VoiceRecorderWidget\";\n\nconst defaultTheme = createTheme({\n  components: {\n    MuiInputBase: {\n      defaultProps: {\n        autoComplete: \"off\",\n      },\n    },\n    MuiTextField: {\n      defaultProps: {\n        variant: \"outlined\",\n      },\n      styleOverrides: {\n        root: {\n          \"& .MuiOutlinedInput-root\": {\n            \"& > fieldset\": { border: \"1px solid #ccc\" },\n          },\n        },\n      },\n    },\n  },\n});\n\nfunction CustomFileWidget(props) {\n  return <FileUploadWidget {...props} />;\n}\n\nfunction CustomVoiceRecorderWidget(props) {\n  return <VoiceRecorderWidget {...props} />;\n}\n\nexport function WebAppRenderer({ app, ws }) {\n  const { schema, uiSchema } = getJSONSchemaFromInputFields(\n    app?.data?.input_fields,\n  );\n  const [appSessionId, setAppSessionId] = useState(null);\n  const [output, setOutput] = useState(null);\n  const [isRunning, setIsRunning] = useState(false);\n  const [userFormData, setUserFormData] = useState({});\n  const [errors, setErrors] = useState(null);\n  const templateEngine = new Liquid();\n  const outputTemplate = templateEngine.parse(\n    app?.data?.output_template?.markdown || \"\",\n  );\n  const chunkedOutput = useRef({});\n  const streamStarted = useRef(false);\n\n  const SubmitButton = (props) => {\n    const submitButtonText =\n      props.uiSchema[\"ui:submitButtonOptions\"]?.submitText || \"Submit\";\n    const style = props.uiSchema[\"ui:submitButtonOptions\"]?.props?.style || {};\n\n    if (props.uiSchema[\"ui:submitButtonOptions\"]?.norender) {\n      return null;\n    }\n\n    return (\n      <Button\n        size=\"medium\"\n        variant=\"contained\"\n        type=\"submit\"\n        sx={{\n          textTransform: \"none\",\n          ...style,\n          backgroundColor: isRunning ? \"grey\" : \"primary\",\n        }}\n      >\n        {isRunning ? \"Cancel\" : submitButtonText}\n      </Button>\n    );\n  };\n\n  if (ws) {\n    ws.setOnMessage((evt) => {\n      const message = JSON.parse(evt.data);\n      // Merge the new output with the existing output\n      if (message.output) {\n        // Set the streamStarted flag if the output has more than input data\n        chunkedOutput.current = stitchObjects(\n          chunkedOutput.current,\n          message.output,\n        );\n      }\n\n      // If we get session info, that means the stream has started\n      if (!streamStarted.current && (message.session || message.errors)) {\n        streamStarted.current = true;\n      }\n\n      if (message.session) {\n        setAppSessionId(message.session.id);\n      }\n\n      if (message.event && message.event === \"done\") {\n        streamStarted.current = false;\n        setIsRunning(false);\n      }\n\n      if (message.errors && message.errors.length > 0) {\n        setErrors({ errors: message.errors });\n        setIsRunning(false);\n      }\n\n      templateEngine\n        .render(outputTemplate, chunkedOutput.current)\n        .then((response) => {\n          setOutput(response);\n        });\n    });\n  }\n\n  const runApp = (input) => {\n    setIsRunning(true);\n    setErrors(null);\n    streamStarted.current = false;\n    chunkedOutput.current = {};\n\n    ws.send(\n      JSON.stringify({\n        event: \"run\",\n        input,\n        session_id: appSessionId,\n      }),\n    );\n    setIsRunning(true);\n  };\n\n  return (\n    <div\n      style={{\n        maxWidth: 1200,\n        margin: \"0 auto\",\n        width: \"100%\",\n        padding: \"0 10px\",\n        textAlign: \"left\",\n      }}\n    >\n      <LexicalRenderer text={app.data?.config?.input_template} />\n      <ThemeProvider theme={defaultTheme}>\n        <Form\n          schema={schema}\n          uiSchema={{\n            ...uiSchema,\n            ...{\n              \"ui:submitButtonOptions\": { props: { disabled: isRunning } },\n            },\n          }}\n          validator={validator}\n          formData={userFormData}\n          onSubmit={({ formData }) => {\n            if (!isRunning) {\n              setUserFormData(formData);\n              runApp(formData);\n            } else {\n              ws.send(\n                JSON.stringify({\n                  event: \"stop\",\n                  session_id: appSessionId,\n                }),\n              );\n              setIsRunning(false);\n            }\n          }}\n          templates={{ ButtonTemplates: { SubmitButton } }}\n          widgets={{\n            FileWidget: CustomFileWidget,\n            voice: CustomVoiceRecorderWidget,\n          }}\n        />\n      </ThemeProvider>\n      <div style={{ marginTop: 50 }}>\n        {isRunning && !streamStarted.current && !errors && (\n          <Grid\n            sx={{\n              margin: \"auto\",\n              textAlign: \"center\",\n            }}\n          >\n            <CircularProgress />\n          </Grid>\n        )}\n        <MarkdownRenderer className=\"webapp-output\">{output}</MarkdownRenderer>\n        {errors && <Errors runError={errors} />}\n      </div>\n    </div>\n  );\n}\n","import React, { useEffect, useRef, useState } from \"react\";\nimport { Avatar, Chip, Fab, Grid, Stack } from \"@mui/material\";\nimport { ThemeProvider, createTheme } from \"@mui/material/styles\";\nimport { Liquid } from \"liquidjs\";\nimport validator from \"@rjsf/validator-ajv8\";\nimport Form from \"@rjsf/mui\";\nimport KeyboardArrowDownIcon from \"@mui/icons-material/KeyboardArrowDown\";\nimport QuestionAnswerIcon from \"@mui/icons-material/QuestionAnswer\";\nimport FileUploadWidget from \"../../components/form/DropzoneFileWidget\";\nimport VoiceRecorderWidget from \"../form/VoiceRecorderWidget\";\nimport { getJSONSchemaFromInputFields, stitchObjects } from \"../../data/utils\";\nimport { LexicalRenderer } from \"./lexical/LexicalRenderer\";\nimport { Errors } from \"../Output\";\n\nimport \"./WebChatRender.css\";\nimport MarkdownRenderer from \"./MarkdownRenderer\";\n\nfunction CustomFileWidget(props) {\n  return <FileUploadWidget {...props} />;\n}\n\nfunction CustomVoiceRecorderWidget(props) {\n  return <VoiceRecorderWidget {...props} />;\n}\n\nconst getContentFromMessage = ({ message, app }) => {\n  try {\n    if (message.role === \"bot\") {\n      return message.content;\n    } else {\n      return Object.keys(message.content).length === 1\n        ? Object.keys(message.content)\n            .map((key) => message.content[key])\n            .join(\"\\n\\n\")\n        : Object.keys(message.content)\n            .map((key) => {\n              const inputField = app?.data?.input_fields?.find(\n                (input_field) => input_field.name === key,\n              );\n              return `**${key}**: ${\n                inputField &&\n                (inputField.type === \"file\" ||\n                  inputField.type === \"voice\" ||\n                  inputField.type === \"image\")\n                  ? message.content[key]\n                      .split(\",\")[0]\n                      .split(\";\")[1]\n                      .split(\"=\")[1]\n                  : message.content[key]\n              }`;\n            })\n            .join(\"\\n\\n\");\n    }\n  } catch (e) {\n    return \"\";\n  }\n};\n\nconst MemoizedMessage = React.memo(\n  ({ message, index, app, onInMessageFormSubmit }) => {\n    return (\n      <div\n        key={index}\n        style={\n          message.role === \"bot\"\n            ? {\n                display: \"flex\",\n                textAlign: \"left\",\n                fontSize: 16,\n                padding: 3,\n              }\n            : { textAlign: \"right\" }\n        }\n      >\n        {message.role === \"bot\" && app?.data?.config?.assistant_image && (\n          <Avatar\n            src={app.data?.config?.assistant_image}\n            alt=\"Bot\"\n            style={{ margin: \"16px 8px 16px 0px\" }}\n          />\n        )}\n        {message.role === \"bot\" && message.content.length <= 1 && (\n          <div className=\"chat_message_from_bot typing-indicator\">\n            <span></span>\n            <span></span>\n            <span></span>\n          </div>\n        )}\n        <MarkdownRenderer\n          className={`chat_message_from_${message.role} ${\n            message.error ? \"error\" : \"\"\n          }`}\n          onFormSubmit={onInMessageFormSubmit}\n        >\n          {getContentFromMessage({ message, app })}\n        </MarkdownRenderer>\n      </div>\n    );\n  },\n);\n\nexport function WebChatRender({ app, isMobile, embed = false, ws }) {\n  const { schema, uiSchema } = getJSONSchemaFromInputFields(\n    app?.data?.input_fields,\n  );\n  const [userFormData, setUserFormData] = useState({});\n  const [appSessionId, setAppSessionId] = useState(null);\n  const [messages, setMessages] = useState([]);\n  const [errors, setErrors] = useState(null);\n  const [showChat, setShowChat] = useState(!embed);\n  const [chatBubbleStyle, setChatBubbleStyle] = useState({\n    backgroundColor: app?.data?.config?.window_color,\n    color: \"white\",\n    position: \"fixed\",\n    right: 16,\n    bottom: 16,\n  });\n  const templateEngine = new Liquid();\n  const outputTemplate = templateEngine.parse(\n    app?.data?.output_template?.markdown || \"\",\n  );\n  const chunkedOutput = useRef({});\n  const chunkedMessages = useRef([]);\n  const chatBubbleRef = useRef(null);\n  const streamStarted = useRef(true);\n\n  const defaultTheme = createTheme({\n    components: {\n      MuiInputBase: {\n        defaultProps: {\n          autoComplete: \"off\",\n        },\n      },\n      MuiTextField: {\n        defaultProps: {\n          variant: \"outlined\",\n        },\n        styleOverrides: {\n          root: {\n            \"& .MuiOutlinedInput-root\": {\n              \"& > fieldset\": {\n                border: `1px solid ${app?.data?.config.window_color || \"#ccc\"}`,\n              },\n              \"&.Mui-focused > fieldset\": { border: \"1px solid #0f477e\" },\n              \"&:hover > fieldset\": { border: \"1px solid #0f477e\" },\n              \"&.Mui-error > fieldset\": { border: \"1px solid #fcc\" },\n            },\n          },\n        },\n      },\n      MuiTypography: {\n        styleOverrides: {\n          caption: {\n            fontSize: \"0.7rem\",\n            marginLeft: 2,\n            color: \"#666\",\n          },\n        },\n      },\n      MuiButtonBase: {\n        styleOverrides: {\n          root: {\n            \"&.MuiButton-contained\": {\n              textTransform: \"none\",\n            },\n          },\n        },\n      },\n    },\n  });\n\n  useEffect(() => {\n    if (embed) {\n      document.body.style = \"background: transparent\";\n      document.getElementsByClassName(\"ant-layout\")[0].style =\n        \"background: transparent\";\n\n      if (showChat) {\n        const userAgent =\n          navigator.userAgent || navigator.vendor || window.opera;\n        const isMobile =\n          /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(\n            userAgent,\n          );\n        const width = isMobile ? \"100%\" : \"400px\";\n        const height = isMobile ? \"90vh\" : \"700px\";\n        window.parent.postMessage(\n          { width, height, type: \"promptly-embed-open\" },\n          \"*\",\n        );\n      } else {\n        setTimeout(() => {\n          window.parent.postMessage(\n            {\n              type: \"promptly-embed-resize\",\n              width: chatBubbleRef?.current?.clientWidth || \"auto\",\n              height: chatBubbleRef?.current?.clientHeight || \"auto\",\n            },\n            \"*\",\n          );\n        }, 500);\n        window.parent.postMessage({ type: \"promptly-embed-close\" }, \"*\");\n      }\n    }\n  }, [embed, showChat]);\n\n  useEffect(() => {\n    if (app?.data?.config?.welcome_message && messages.length === 0) {\n      setMessages([\n        {\n          role: \"bot\",\n          content: app.data?.config?.welcome_message,\n        },\n      ]);\n    }\n\n    if (\n      app?.data?.config?.chat_bubble_text &&\n      app?.data?.config?.chat_bubble_style &&\n      messages.length === 0\n    ) {\n      try {\n        const style = JSON.parse(app?.data?.config?.chat_bubble_style);\n        setChatBubbleStyle((prevBubbleStyle) => ({\n          ...prevBubbleStyle,\n          ...style,\n        }));\n      } catch (e) {\n        console.error(e);\n      }\n    }\n  }, [app, messages.length]);\n\n  if (ws) {\n    ws.setOnMessage((evt) => {\n      let error = null;\n      const message = JSON.parse(evt.data);\n      // Merge the new output with the existing output\n      if (message.output) {\n        chunkedOutput.current = stitchObjects(\n          chunkedOutput.current,\n          message.output,\n        );\n      }\n\n      if (message.event && message.event === \"done\") {\n        streamStarted.current = true;\n        return;\n      }\n\n      // If we get session info, that means the stream has started\n      if (!streamStarted.current && (message.session || message.errors)) {\n        streamStarted.current = true;\n      }\n\n      if (message.session) {\n        setAppSessionId(message.session?.id);\n      }\n\n      if (message.errors && message.errors.length > 0) {\n        error = message.errors.join(\"\\n\\n\");\n      }\n\n      templateEngine\n        .render(outputTemplate, chunkedOutput.current)\n        .then((response) => {\n          if (response.trim() === \"\" && error === null) {\n            error = \"No response from AI. Please try again.\";\n          }\n\n          chunkedMessages.current = [\n            ...chunkedMessages.current.slice(0, -1),\n            {\n              role: \"bot\",\n              content:\n                error !== null\n                  ? error || \"Unknown error occured. Please try again.\"\n                  : response.trim(),\n              error: error !== null,\n            },\n          ];\n          setMessages(chunkedMessages.current);\n          error = null;\n        });\n    });\n  }\n\n  const runApp = (input) => {\n    setErrors(null);\n    setMessages([...messages, { role: \"user\", content: input }]);\n\n    streamStarted.current = false;\n    chunkedOutput.current = {};\n    chunkedMessages.current = [\n      ...messages,\n      { role: \"user\", content: input },\n      { role: \"bot\", content: \"\" },\n    ];\n    ws.send(\n      JSON.stringify({\n        event: \"run\",\n        input,\n        session_id: appSessionId,\n      }),\n    );\n  };\n\n  useEffect(() => {\n    const messagesDiv = document.getElementById(\"messages\");\n    messagesDiv.scrollTop = messagesDiv.scrollHeight;\n  }, [messages]);\n\n  return (\n    <>\n      {embed && (\n        <Fab\n          style={chatBubbleStyle}\n          onClick={() => setShowChat(!showChat)}\n          variant={\n            app?.data?.config?.chat_bubble_text ? \"extended\" : \"circular\"\n          }\n          ref={chatBubbleRef}\n        >\n          {showChat ? (\n            <KeyboardArrowDownIcon />\n          ) : app?.data?.config?.chat_bubble_text ? (\n            <span>{app?.data?.config?.chat_bubble_text}</span>\n          ) : (\n            <QuestionAnswerIcon />\n          )}\n        </Fab>\n      )}\n      <div\n        className={`chat-container ${embed ? \"embedded\" : \"\"} ${\n          showChat ? \"maximized\" : \"minimized\"\n        }`}\n        style={{\n          width: isMobile ? \"90%\" : \"100%\",\n        }}\n      >\n        {embed && (\n          <div\n            style={{\n              display: \"flex\",\n              backgroundColor: app?.data?.config.window_color,\n              borderRadius: \"8px 8px 0px 0px\",\n            }}\n          >\n            {app?.data?.config?.assistant_image && (\n              <Avatar\n                src={app.data?.config?.assistant_image}\n                alt=\"Bot\"\n                style={{ margin: \"10px 8px\", border: \"solid 1px #ccc\" }}\n              />\n            )}\n            <span\n              style={{\n                margin: \"auto 0px\",\n                fontWeight: 600,\n                fontSize: \"18px\",\n                color: \"white\",\n                padding: app?.data?.config?.assistant_image\n                  ? \"inherit\"\n                  : \"16px\",\n              }}\n            >\n              {app?.name}\n            </span>\n          </div>\n        )}\n        <Stack sx={{ padding: \"10px\", overflow: \"auto\" }}>\n          <LexicalRenderer\n            text={app.data?.config?.input_template?.replaceAll(\n              \"<a href\",\n              \"<a target='_blank' href\",\n            )}\n          />\n          <div\n            style={{\n              marginTop: 10,\n              height: isMobile || embed ? \"30vh\" : \"500px\",\n              overflow: \"auto\",\n              display: \"flex\",\n              flexDirection: \"column\",\n              gap: 10,\n            }}\n            id=\"messages\"\n          >\n            {messages.map((message, index) => {\n              return (\n                <MemoizedMessage\n                  key={index}\n                  message={message}\n                  index={index}\n                  app={app}\n                  onInMessageFormSubmit={(data) => {}}\n                />\n              );\n            })}\n            {!streamStarted.current && (\n              <div\n                style={{\n                  display: \"flex\",\n                  textAlign: \"left\",\n                  fontSize: 16,\n                  padding: 3,\n                }}\n              >\n                {app?.data?.config?.assistant_image && (\n                  <Avatar\n                    src={app.data?.config?.assistant_image}\n                    alt=\"Bot\"\n                    style={{ margin: \"16px 8px 16px 0px\" }}\n                  />\n                )}\n                <div className=\"chat_message_from_bot typing-indicator\">\n                  <span></span>\n                  <span></span>\n                  <span></span>\n                </div>\n              </div>\n            )}\n            {errors && <Errors runError={errors} />}\n            {messages.filter((message) => message.role === \"user\").length ===\n              0 &&\n              app?.data?.config?.suggested_messages &&\n              app?.data?.config?.suggested_messages.length > 0 && (\n                <Grid\n                  sx={{\n                    alignSelf: \"flex-end\",\n                    textAlign: \"right\",\n                    marginTop: \"auto\",\n                  }}\n                >\n                  {app?.data?.config?.suggested_messages.map(\n                    (message, index) => (\n                      <Chip\n                        key={index}\n                        label={message}\n                        sx={{ margin: \"5px 2px\" }}\n                        onClick={() =>\n                          app?.input_fields?.length > 0 &&\n                          runApp({\n                            [Object.keys(app?.input_fields)[0].name]: message,\n                          })\n                        }\n                      />\n                    ),\n                  )}\n                </Grid>\n              )}\n          </div>\n          <ThemeProvider theme={defaultTheme}>\n            <Form\n              formData={userFormData}\n              schema={schema}\n              uiSchema={{\n                ...uiSchema,\n                \"ui:submitButtonOptions\": {\n                  norender:\n                    Object.keys(schema?.properties).length <= 1 &&\n                    Object.keys(uiSchema)\n                      .map((key) => uiSchema[key]?.[\"ui:widget\"])\n                      .filter((x) => x === \"voice\").length === 0\n                      ? true\n                      : false,\n                },\n              }}\n              validator={validator}\n              onSubmit={({ formData }) => {\n                if (Object.keys(schema?.properties).length > 1) {\n                  setUserFormData(formData);\n                }\n                runApp(formData);\n              }}\n              widgets={{\n                FileWidget: CustomFileWidget,\n                voice: CustomVoiceRecorderWidget,\n              }}\n            />\n          </ThemeProvider>\n          {embed && (\n            <p style={{ textAlign: \"center\" }}>\n              Powered by{\" \"}\n              <a\n                href=\"https://trypromptly.com\"\n                target=\"_blank\"\n                rel=\"noreferrer\"\n              >\n                Promptly\n              </a>\n            </p>\n          )}\n        </Stack>\n      </div>\n    </>\n  );\n}\n","import { ReactMarkdown } from \"react-markdown/lib/react-markdown\";\nimport \"./LexicalEditor.css\";\n\nexport function LexicalRenderer({ text }) {\n  const domParser = new DOMParser();\n  const doc = domParser.parseFromString(text, \"text/html\");\n\n  return String(text).startsWith(\"<\") ? (\n    <div\n      className=\"LexicalRenderer__wrapper\"\n      dangerouslySetInnerHTML={{ __html: doc.body.innerHTML }}\n    />\n  ) : (\n    <ReactMarkdown>{text}</ReactMarkdown>\n  );\n}\n","import { Box, Typography } from \"@mui/material\";\n\nexport function Empty({ emptyImage, emptyMessage, ...props }) {\n  return (\n    <Box\n      display=\"flex\"\n      flexDirection=\"column\"\n      alignItems=\"center\"\n      justifyContent=\"center\"\n      height=\"100%\"\n      color=\"#838383\"\n    >\n      {emptyImage ? emptyImage : null}\n      <Typography variant=\"h6\">\n        {emptyMessage ? emptyMessage : \"No data available\"}\n      </Typography>\n    </Box>\n  );\n}\n","import { useState } from \"react\";\n\nimport { IconButton, Stack, Typography, Box } from \"@mui/material\";\nimport StopCircleIcon from \"@mui/icons-material/StopCircle\";\nimport MicIcon from \"@mui/icons-material/Mic\";\nimport DeleteIcon from \"@mui/icons-material/Delete\";\n\nconst VoiceRecorderWidget = (props) => {\n  const [isRecording, setIsRecording] = useState(false);\n  const [mediaRecorder, setMediaRecorder] = useState(null);\n  const [recordedBlob, setRecordedBlob] = useState(null);\n\n  const handleStartRecording = async () => {\n    if (recordedBlob) {\n      setRecordedBlob(null);\n    }\n    try {\n      const stream = await navigator.mediaDevices.getUserMedia({ audio: true });\n      const recorder = new MediaRecorder(stream, {\n        mimeType: \"audio/webm\",\n      });\n\n      recorder.addEventListener(\"dataavailable\", (event) => {\n        const audioBlob = event.data;\n        setRecordedBlob(audioBlob);\n        const reader = new window.FileReader();\n        const name = \"audio_recording.webm\";\n        reader.onload = (event) => {\n          if (typeof event.target?.result === \"string\") {\n            const split_data = event.target.result.split(\";\");\n            const dataURL = `${split_data[0]};name=${name};${split_data[2]}`;\n            props.onChange(dataURL);\n          } else {\n            props.onChange(null);\n          }\n        };\n        reader.readAsDataURL(audioBlob);\n      });\n\n      recorder.start();\n      setIsRecording(true);\n      setMediaRecorder(recorder);\n    } catch (error) {\n      console.error(\"Error starting recording:\", error);\n    }\n  };\n\n  const handleStopRecording = () => {\n    if (mediaRecorder) {\n      mediaRecorder.stop();\n      setIsRecording(false);\n    }\n  };\n\n  const handleClearRecording = () => {\n    setRecordedBlob(null);\n    props.onChange(null);\n  };\n\n  const RecordIcon = (props) => {\n    return (\n      <Stack direction={\"column\"}>\n        <IconButton\n          onClick={handleStartRecording}\n          color=\"primary\"\n          size=\"small\"\n          variant=\"outlined\"\n        >\n          <MicIcon />\n        </IconButton>\n        <Typography style={{ fontSize: \"8px\", textAlign: \"center\" }}>\n          Start\n        </Typography>\n        <Typography style={{ fontSize: \"8px\", textAlign: \"center\" }}>\n          Recording\n        </Typography>\n      </Stack>\n    );\n  };\n\n  const StopIcon = (props) => {\n    return (\n      <Stack direction={\"column\"}>\n        <IconButton\n          onClick={handleStopRecording}\n          size=\"small\"\n          aria-label=\"Stop recording\"\n          variant=\"outlined\"\n        >\n          <StopCircleIcon />\n        </IconButton>\n        <Typography\n          style={{ fontSize: \"8px\", textAlign: \"center\", color: \"red\" }}\n        >\n          Recording\n        </Typography>\n      </Stack>\n    );\n  };\n\n  const ClearRecordingIcon = (props) => {\n    return (\n      <Stack direction={\"column\"} ml={1} mr={1}>\n        <IconButton\n          onClick={handleClearRecording}\n          size=\"small\"\n          aria-label=\"Clear Recording\"\n          variant=\"outlined\"\n        >\n          <DeleteIcon />\n        </IconButton>\n        <Typography style={{ fontSize: \"8px\", textAlign: \"center\" }}>\n          Clear\n        </Typography>\n        <Typography style={{ fontSize: \"8px\", textAlign: \"center\" }}>\n          Recording\n        </Typography>\n      </Stack>\n    );\n  };\n\n  return (\n    <div>\n      <label>{props.label}</label>\n      <div>\n        {recordedBlob ? (\n          <Stack direction={\"row\"}>\n            <audio src={URL.createObjectURL(recordedBlob)} controls />\n            <Box\n              sx={{\n                display: \"flex\",\n                justifyContent: \"space-between\",\n              }}\n            >\n              <ClearRecordingIcon />\n              <RecordIcon />\n            </Box>\n          </Stack>\n        ) : isRecording ? (\n          <StopIcon />\n        ) : (\n          <RecordIcon />\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default VoiceRecorderWidget;\n","// Helper function to stitch two objects together. If the key doesn't exist in the first object, it will be added. If it does exist, the value will be appended to the existing value in case of strings. In case of arrays, entries will be recursively stitched together. We keep the original order of the array. If the incoming array has more entries than the existing array, the extra entries will be appended to the end of the existing array.\nexport function stitchObjects(obj1, obj2) {\n  if (!obj1) return obj2;\n  if (!obj2) return obj1;\n\n  let newObj = { ...obj1 };\n\n  for (const [key, value] of Object.entries(obj2)) {\n    // If the key doesn't exist in the first object, add it\n    if (!newObj[key]) {\n      newObj[key] = value;\n      continue;\n    }\n\n    // If the key exists in the first object, stitch the values together\n    if (Array.isArray(value)) {\n      if (Array.isArray(newObj[key])) {\n        // If both the values are arrays, stitch the arrays together\n        for (let i = 0; i < value.length; i++) {\n          if (i < newObj[key].length) {\n            if (typeof value[i] === \"string\") {\n              newObj[key][i] = newObj[key][i] + value[i];\n              continue;\n            }\n            if (typeof value[i] === \"number\") {\n              newObj[key][i] = value[i];\n              continue;\n            }\n            // If the index exists in the existing array, stitch the objects together\n            newObj[key][i] = stitchObjects(newObj[key][i], value[i]);\n          } else {\n            // If the index doesn't exist in the existing array, append the object to the end of the array\n            newObj[key].push(value[i]);\n          }\n        }\n      } else {\n        newObj[key] = newObj[key] + value;\n      }\n    } else if (typeof value === \"object\") {\n      newObj[key] = stitchObjects(newObj[key], value);\n    } else {\n      newObj[key] = newObj[key] + value;\n    }\n  }\n  return newObj;\n}\n\n/**\n *\n * @param {*} inputFields - array of input fields with name, title, description, type, required etc.,\n * @returns {object} schema\n */\nexport function getJSONSchemaFromInputFields(inputFields) {\n  let schema = {\n    type: \"object\",\n    properties: {},\n  };\n\n  let uiSchema = {};\n  let order = [];\n  let required = [];\n\n  inputFields &&\n    inputFields.forEach((field) => {\n      order.push(field.name);\n\n      if (field.required) {\n        required.push(field.name);\n      }\n\n      schema.properties[field.name] = {\n        type:\n          field.type === \"text\" ||\n          field.type === \"voice\" ||\n          field.type === \"file\" ||\n          field.type === \"select\"\n            ? \"string\"\n            : field.type,\n        title: field.title,\n        description: field.description,\n      };\n\n      if (field.default) {\n        schema.properties[field.name].default = field.default;\n      }\n\n      if (field.type === \"text\") {\n        uiSchema[field.name] = {\n          \"ui:widget\": \"textarea\",\n        };\n      }\n\n      if (field.type === \"boolean\") {\n        uiSchema[field.name] = {\n          \"ui:widget\": \"radio\",\n        };\n      }\n\n      if (field.type === \"file\") {\n        uiSchema[field.name] = {\n          \"ui:widget\": \"file\",\n        };\n        schema.properties[field.name].format = \"data-url\";\n        schema.properties[field.name].pattern =\n          \"data:(.*);name=(.*);base64,(.*)\";\n      }\n\n      if (field.type === \"voice\") {\n        uiSchema[field.name] = {\n          \"ui:widget\": \"voice\",\n        };\n        schema.properties[field.name].format = \"data-url\";\n        schema.properties[field.name].pattern =\n          \"data:(.*);name=(.*);base64,(.*)\";\n      }\n\n      if (field.type === \"select\") {\n        uiSchema[field.name] = {\n          \"ui:widget\": \"select\",\n        };\n        schema.properties[field.name].enum = field.options?.map(\n          (option) => option.value,\n        );\n        schema.properties[field.name].enumNames = field.options?.map(\n          (option) => option.label,\n        );\n      }\n    });\n\n  uiSchema[\"ui:order\"] = order;\n  uiSchema[\"ui:required\"] = required;\n\n  return { schema, uiSchema };\n}\n","// A simple wrapper over websockets\n\nexport class Ws {\n  constructor(url) {\n    this.url = url;\n    this.ws = null;\n    this.onMessage = null;\n    this.queue = []; // Queue to hold until messages are ready\n  }\n\n  status() {\n    return this.ws.readyState;\n  }\n\n  connect() {\n    this.ws = new WebSocket(this.url);\n    this.ws.onmessage = this.onMessage;\n    this.ws.onopen = () => {\n      // Send all the queued messages\n      this.queue.forEach((msg) => {\n        this.ws.send(msg);\n      });\n      this.queue = [];\n    };\n    this.ws.onclose = () => {\n      console.log(\"Websocket closed\");\n    };\n  }\n\n  // Adds message to the queue if the socket is not ready\n  send(msg) {\n    if (this.ws === null) this.connect();\n\n    if (this.ws.readyState === WebSocket.CONNECTING) {\n      this.queue.push(msg);\n    } else if (this.ws.readyState === WebSocket.OPEN) {\n      this.ws.send(msg);\n    } else {\n      this.queue.push(msg);\n      this.connect();\n    }\n  }\n\n  close() {\n    this.ws.close();\n  }\n\n  setOnMessage(onMessage) {\n    this.onMessage = onMessage;\n  }\n}\n"],"names":["outputTheme","createTheme","typography","fontFamily","fontSize","color","components","MuiFormControl","styleOverrides","root","MuiImageList","width","height","MuiListItemText","whiteSpace","MuiImageListItem","img","Errors","props","errors","runError","map","error","severity","Result","formData","api_response","Object","keys","length","validator","schema","uiSchema","readonly","theme","className","emptyMessage","Output","React","value","setValue","sx","borderBottom","borderColor","onChange","event","newValue","label","padding","loading","FunctionFormComponent","useState","setFormData","submitBtnDisabled","setSubmitBtnDisabled","form","JSON","parse","children","ThemedJsonForm","e","submitBtn","Button","variant","onClick","onFormSubmit","disabled","console","log","MarkdownRenderer","remarkPlugins","remarkGfm","node","alt","src","split","altText","style","styleJson","startsWith","controls","display","autoPlay","endsWith","maxWidth","boxShadow","a","target","rel","table","borderCollapse","border","tr","th","td","code","codeProps","defaultTheme","MuiInputBase","defaultProps","autoComplete","MuiTextField","CustomFileWidget","CustomVoiceRecorderWidget","VoiceRecorderWidget","WebAppRenderer","app","ws","getJSONSchemaFromInputFields","data","input_fields","appSessionId","setAppSessionId","output","setOutput","isRunning","setIsRunning","userFormData","setUserFormData","setErrors","templateEngine","Liquid","outputTemplate","output_template","markdown","chunkedOutput","useRef","streamStarted","setOnMessage","evt","message","current","stitchObjects","session","id","render","then","response","margin","textAlign","LexicalRenderer","text","config","input_template","ThemeProvider","onSubmit","input","send","stringify","session_id","templates","ButtonTemplates","SubmitButton","submitButtonText","submitText","norender","size","type","textTransform","backgroundColor","widgets","FileWidget","voice","marginTop","Grid","CircularProgress","getContentFromMessage","role","content","key","join","inputField","find","input_field","name","MemoizedMessage","index","onInMessageFormSubmit","assistant_image","Avatar","WebChatRender","isMobile","embed","messages","setMessages","showChat","setShowChat","window_color","position","right","bottom","chatBubbleStyle","setChatBubbleStyle","chunkedMessages","chatBubbleRef","MuiTypography","caption","marginLeft","MuiButtonBase","useEffect","document","body","getElementsByClassName","userAgent","navigator","vendor","window","opera","test","parent","postMessage","setTimeout","clientWidth","clientHeight","welcome_message","chat_bubble_text","chat_bubble_style","prevBubbleStyle","trim","slice","runApp","messagesDiv","getElementById","scrollTop","scrollHeight","Fab","ref","KeyboardArrowDown","QuestionAnswer","borderRadius","fontWeight","Stack","overflow","replaceAll","flexDirection","gap","filter","suggested_messages","alignSelf","Chip","properties","x","href","doc","DOMParser","parseFromString","String","dangerouslySetInnerHTML","__html","innerHTML","Empty","emptyImage","alignItems","justifyContent","isRecording","setIsRecording","mediaRecorder","setMediaRecorder","recordedBlob","setRecordedBlob","handleStartRecording","mediaDevices","getUserMedia","audio","stream","recorder","MediaRecorder","mimeType","addEventListener","audioBlob","reader","FileReader","onload","result","split_data","dataURL","readAsDataURL","start","handleStopRecording","stop","handleClearRecording","RecordIcon","direction","StopIcon","ClearRecordingIcon","ml","mr","URL","createObjectURL","obj1","obj2","newObj","entries","Array","isArray","i","push","inputFields","order","required","forEach","field","title","description","default","format","pattern","enum","options","option","enumNames","Ws","url","this","onMessage","queue","readyState","WebSocket","onmessage","onopen","msg","onclose","connect","CONNECTING","OPEN","close"],"sourceRoot":""}